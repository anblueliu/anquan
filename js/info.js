var info = [{
    detail:{
        image:'./images/product1/product.jpg',
        name:'160g多谷果子',
        brand:'多谷果子',
        specifications:'160g/袋',
        shelflife:'9月',
        batch:'20190330',
        date:'2019-03-30',
        barcode:'6934364807248',
        standard:'GB/T22699',
    },
    detection:{
        date:'2019-03-30',
        people:'杨艳玲',
        institution:'化验室',
        gist:'产品质量验收标准',
        result:'水分 微生物 : 合格',
        conclusion:'合格',
    },
    material:[{
        image:'./images/product1/yumifen.jpg',
        name:'玉米粉',
        species:'玉米',
        specifications:'160g/袋',
        shelflife:'1年',
        standard:'GB/T 10463-2008',
    },{
        image:'./images/product1/dadoudanbaifen.jpg',
        name:'大豆蛋白粉',
        species:'调味品',
        specifications:'25kg每袋',
        shelflife:'18月',
        standard:'GB/T22699',
    },{
        image:'./images/product1/dami.jpg',
        name:'大米（半成品）',
        species:'粮食加工品',
        specifications:'25kg每袋',
        shelflife:'1年',
        standard:'GB/T22699',
    }],
    company:{
        name:'吉林米老头食品工业有限公司',
        scope:'饼干、膨化食品生产、销售',
        license:'220221000101681',
        phone:'15928533813',
        address:'吉林省吉林市永吉县岔路河镇吉林（中国-新加坡）食品区工业园区经四路与纬三街交汇处',
    }
},{
    detail:{
        image:'./images/product2/product.jpg',
        name:'150g蛋黄卷',
        brand:'蛋卷',
        specifications:'150g/袋',
        shelflife:'9月',
        batch:'20190404',
        date:'2019-04-04',
        barcode:'6925332600107',
        standard:'GB/T20980',
    },
    detection:{
        date:'2019-03-30',
        people:'杨艳玲',
        institution:'化验室',
        gist:'产品质量验收标准',
        result:'水分 微生物 : 合格',
        conclusion:'合格',
    },
    material:[{
        image:'./images/product2/img1.png',
        name:'原装精炼棕榈油',
        species:'食用油、油脂及其制品',
        specifications:'20kg每件',
        shelflife:'12月',
        standard:'GB/T22699',
    },{
        image:'./images/product2/img2.jpeg',
        name:'白糖',
        species:'食糖',
        specifications:'50KG每袋',
        shelflife:'18月',
        standard:'GB/T20980',
    },{
        image:'./images/product2/img3.png',
        name:'起酥油',
        species:'食用油、油脂及其制品',
        specifications:'15kg每件',
        shelflife:'18月',
        standard:'GB/T22699',
    },{
        image:'./images/product2/img4.jpeg',
        name:'面粉',
        species:'粮食加工品',
        specifications:'25KG',
        shelflife:'8月',
        standard:'GB/T20980',
    }],
    company:{
        name:'吉林米老头食品工业有限公司',
        scope:'饼干、膨化食品生产、销售',
        license:'220221000101681',
        phone:'15928533813',
        address:'吉林省吉林市永吉县岔路河镇吉林（中国-新加坡）食品区工业园区经四路与纬三街交汇处',
    }
},{
    detail:{
        image:'./images/product3/product.jpg',
        name:'糯甜玉米糊',
        brand:'明双',
        specifications:'400g/袋',
        shelflife:'12月',
        batch:'20190330',
        date:'2019-03-30',
        barcode:'6970376800525',
        standard:'Q/JLMX0050S -2017',
    },
    detection:{
        date:'2019-03-30',
        people:'明兴农业',
        institution:'明兴',
        gist:'企业标准',
        result:'外观色泽 : 正常',
        conclusion:'合格',
    },
    material:[{
        image:'./images/product3/img1.jpg',
        name:'绵白糖',
        species:'食糖',
        specifications:'25kg/袋',
        shelflife:'18月',
        standard:'GB1445-2000',
    },{
        image:'./images/product3/img2.jpg',
        name:'葡萄糖',
        species:'糖果制品（含巧克力及制品）',
        specifications:'25kg/袋',
        shelflife:'18月',
        standard:'GB/T20880-2007',
    },{
        image:'./images/product3/img3.jpg',
        name:'玉米',
        species:'玉米',
        specifications:'公斤',
        shelflife:'2年',
        standard:'Q/JLMX0001S-2015',
    }],
    company:{
        name:'吉林明兴农产品有限公司',
        scope:'粮食加工品,其他粮食加工品',
        license:'91220221673343120A',
        phone:'18686300456',
        address:'吉林省吉林（中国-新加坡）食品工业园区（长春大街与海王路交汇处）',
    }
},{
    detail:{
        image:'./images/product4/product.jpg',
        name:'高钙玉米糊',
        brand:'明双',
        specifications:'400g/袋',
        shelflife:'12月',
        batch:'20190317',
        date:'2019-03-17',
        barcode:'6970376800518',
        standard:'Q/JLMX0050S -2017',
    },
    detection:{
        date:'2019-03-30',
        people:'明兴农业',
        institution:'明兴',
        gist:'企业标准',
        result:'外观色泽 : 正常',
        conclusion:'合格',
    },
    material:[{
        image:'./images/product4/img1.jpg',
        name:'黄瓜籽',
        species:'蔬菜制品',
        specifications:'公斤',
        shelflife:'1年',
        standard:'DB/T 33406-2003',
    },{
        image:'./images/product4/img2.jpg',
        name:'玉米',
        species:'玉米',
        specifications:'公斤',
        shelflife:'2年',
        standard:'Q/JLMX0001S-2015',
    }],
    company:{
        name:'吉林明兴农产品有限公司',
        scope:'粮食加工品,其他粮食加工品',
        license:'91220221673343120A',
        phone:'18686300456',
        address:'吉林省吉林（中国-新加坡）食品工业园区（长春大街与海王路交汇处）',
    }
}]



var swiper = new Swiper('.swiper-container', {
    pagination: {
        el: '.swiper-pagination',
        type: 'fraction',
    },
    autoplay: {
        delay: 3000,
        stopOnLastSlide: false,
        disableOnInteraction: false,
    },
    loop: true,
});
swiper.el.onmouseover = function() {
    swiper.autoplay.stop();
}
swiper.el.onmouseout = function() {
    swiper.autoplay.start();
}


// console.log(info);
var btnform = document.querySelector('#btnform');
var show = document.querySelector('.show');

var detailimage = document.querySelector('#detailimage');
var detailname = document.querySelector('#detailname');
var detailbrand = document.querySelector('#detailbrand');
var detailspecifications = document.querySelector('#detailspecifications');
var detailshelflife = document.querySelector('#detailshelflife');
var detailbatch = document.querySelector('#detailbatch');
var detaildate = document.querySelector('#detaildate');
var detailbarcode = document.querySelector('#detailbarcode');
var detailstandard = document.querySelector('#detailstandard');

var detectiondate = document.querySelector('#detectiondate');
var detectionpeople = document.querySelector('#detectionpeople');
var detectioninstitution = document.querySelector('#detectioninstitution');
var detectiongist = document.querySelector('#detectiongist');
var detectionresult = document.querySelector('#detectionresult');
var detectionconclusion = document.querySelector('#detectionconclusion');

var companyname = document.querySelector('#companyname');
var companyscope = document.querySelector('#companyscope');
var companylicense = document.querySelector('#companylicense');
var companyphone = document.querySelector('#companyphone');
var companyaddress = document.querySelector('#companyaddress');

var swiperWrapper = document.querySelector('.swiper-wrapper');
var company = document.querySelector('.company');
var detection = document.querySelector('.detection');
// 是否存在此产品
var ifexist = 0;
// 查询事件
btnform.addEventListener('click', function() {
    show.style.display = 'none';
    company.style.display = 'none';
    detection.style.display = 'none';
    swiper.removeAllSlides();
    var barcodeVal = document.querySelector('#barcode').value;
    var batch = document.querySelector('#batch').value;
    console.log(barcodeVal);
    for (var i = 0; i < info.length; i++) {
        if (batch == info[i].detail.batch) {
            company.style.display = 'block';
            detection.style.display = 'block';
        }
        // 判断批条形码是否正确
        if (barcodeVal == info[i].detail.barcode) {
            // 判断批次号是否正确
            if (batch != info[i].detail.batch && batch != '') {
                layui.use('layer', function() {
                    var layer = layui.layer;
                    console.log(batch);
                    layer.msg('请正确输入批次号!');
                });
            }
            ifexist = 1;

            show.style.display = 'block';
            detailimage.src = info[i].detail.image;
            detailname.innerHTML = '产品名称:' + info[i].detail.name;
            detailbrand.innerHTML = '产品品牌:' + info[i].detail.brand;
            detailspecifications.innerHTML = '产品规格:' + info[i].detail.specifications;
            detailshelflife.innerHTML = '保质期:' + info[i].detail.shelflife;
            detailbatch.innerHTML = '产品批次:' + info[i].detail.batch;
            detaildate.innerHTML = '生成日期:' + info[i].detail.date;
            detailbarcode.innerHTML = '产品条码:' + info[i].detail.barcode;
            detailstandard.innerHTML = '执行标准:' + info[i].detail.standard;
            detectiondate.innerHTML = '' + info[i].detection.date;
            detectionpeople.innerHTML = '' + info[i].detection.people;
            detectioninstitution.innerHTML = '' + info[i].detection.institution;
            detectiongist.innerHTML = '' + info[i].detection.gist;
            detectionresult.innerHTML = '' + info[i].detection.result;
            detectionconclusion.innerHTML = '' + info[i].detection.conclusion;
            companyname.innerHTML = '企业名称:' + info[i].company.name;
            companyscope.innerHTML = '经营范围:' + info[i].company.scope;
            companylicense.innerHTML = '营业制造号:' + info[i].company.license;
            companyphone.innerHTML = '联系电话:' + info[i].company.phone;
            companyaddress.innerHTML = '企业地址:' + info[i].company.address;
            var slide = 0;
            if (info[i].material.length % 2 == 1) {
                slide = Math.ceil(info[i].material.length / 2) - 1;
                console.log("slide" + slide)

            } else {
                slide = Math.ceil(info[i].material.length / 2);
                console.log("slide" + slide)
            }
            swiperWrapper.innerHTML = ''
                // 添加原辅料
            for (var j = 0; j < slide; j++) {
                console.log("slide" + slide)
                swiper.appendSlide('<div class="swiper-slide">'

                    +
                    '<div class="material-item">' +
                    '<div class="material-item-img">' +
                    '<img src="' +
                    info[i].material[j * 2].image +
                    '" alt="" class="materialimage">' +
                    '</div>' +
                    '<div class="material-item-info">' +
                    '<div class="item materialname">名称:' + info[i].material[j * 2].name + '</div>' +
                    '<div class="item materialspecies">种类:' + info[i].material[j * 2].species + '</div>' +
                    '<div class="item materialspecifications">规定:' + info[i].material[j * 2].specifications + '</div>' +
                    '<div class="item materialshelflife">保质期:' + info[i].material[j * 2].shelflife + '</div>' +
                    '<div class="item materialstandard">执行标准号:' + info[i].material[j * 2].standard + '</div>' +
                    '</div>' +
                    '</div>'

                    +
                    '<div class="material-item">' +
                    '<div class="material-item-img">' +
                    '<img src="' +
                    info[i].material[j * 2 + 1].image +
                    '" alt="" class="materialimage">' +
                    '</div>' +
                    '<div class="material-item-info">' +
                    '<div class="item materialname">名称:' + info[i].material[j * 2 + 1].name + '</div>' +
                    '<div class="item materialspecies">种类:' + info[i].material[j * 2 + 1].species + '</div>' +
                    '<div class="item materialspecifications">规定:' + info[i].material[j * 2 + 1].specifications + '</div>' +
                    '<div class="item materialshelflife">保质期:' + info[i].material[j * 2 + 1].shelflife + '</div>' +
                    '<div class="item materialstandard">执行标准号:' + info[i].material[j * 2 + 1].standard + '</div>' +
                    '</div>' +
                    '</div>'

                    +
                    '</div>');

            }

            var materialLength = info[i].material.length - 1
            if (info[i].material.length % 2 == 1) {
                swiper.appendSlide('<div class="swiper-slide">'

                    +
                    '<div class="material-item">' +
                    '<div class="material-item-img">' +
                    '<img src="' +
                    info[i].material[info[i].material.length - 1].image +
                    '" alt="" class="materialimage">' +
                    '</div>' +
                    '<div class="material-item-info">' +
                    '<div class="item materialname">名称:' + info[i].material[materialLength].name + '</div>' +
                    '<div class="item materialspecies">种类:' + info[i].material[materialLength].species + '</div>' +
                    '<div class="item materialspecifications">规定:' + info[i].material[materialLength].specifications + '</div>' +
                    '<div class="item materialshelflife">保质期:' + info[i].material[materialLength].shelflife + '</div>' +
                    '<div class="item materialstandard">执行标准号:' + info[i].material[materialLength].standard + '</div>' +
                    '</div>' +
                    '</div>' +
                    '</div>')
            }


        }
    }

    // 判断是否存在商品,没有则显示
    if (ifexist == 0) {
        layui.use('layer', function() {
            var layer = layui.layer;

            layer.msg('请正确输入条形码!');
        });
    }

    ifexist = 0;
})